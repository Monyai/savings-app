#!/bin/bash

SESSION="savings-app-dev"

echo "ğŸ“Š ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æºç›£è¦–é–‹å§‹..."

# å„paneã®çŠ¶æ³ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
monitor_pane() {
    local pane=$1
    local role=$2
    echo "=== $role (pane $pane) ==="
    tmux capture-pane -t $SESSION:0.$pane -p | tail -10
    echo ""
}

# 10ç§’é–“éš”ã§5å›ç›£è¦–
for i in {1..5}; do
    echo "ğŸ“Š ç›£è¦–ãƒ©ã‚¦ãƒ³ãƒ‰ $i/5 ($(date '+%H:%M:%S'))"
    echo "----------------------------------------"
    
    monitor_pane 0 "PRESIDENT"
    monitor_pane 1 "BOSS_UI"  
    monitor_pane 2 "BOSS_BACKEND"
    monitor_pane 3 "WORKER_FIGMA"
    monitor_pane 4 "WORKER_FLUTTER1"
    
    echo "========================================"
    sleep 10
done

# æœ€çµ‚çŠ¶æ³ç¢ºèª
echo "ğŸ“‹ æœ€çµ‚çŠ¶æ³ç¢ºèª"
claude << 'MONITOR_ANALYSIS'
ç›£è¦–ãƒ­ã‚°ã‚’åˆ†æã—ã¦ã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æºã®è©•ä¾¡ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š

åˆ†æé …ç›®ï¼š
1. é€šä¿¡ãƒ•ãƒ­ãƒ¼åŠ¹ç‡æ€§ï¼ˆæŒ‡ç¤ºâ†’å®Ÿè¡Œâ†’å ±å‘Šã‚µã‚¤ã‚¯ãƒ«ï¼‰
2. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®å”èª¿åº¦
3. å•é¡Œç™ºç”Ÿæ™‚ã®å¯¾å¿œé€Ÿåº¦
4. å“è³ªãƒã‚§ãƒƒã‚¯ã®å®ŸåŠ¹æ€§
5. PRESIDENTçµ±åˆ¶åŠ›

Slack #savings-app-dev ã«ç›£è¦–åˆ†æçµæœã‚’å ±å‘Šï¼š
\"ğŸ“Š ã€é€£æºç›£è¦–åˆ†æçµæœã€‘
â° ç›£è¦–æœŸé–“: [é–‹å§‹]ã€œ[çµ‚äº†]
ğŸ“ˆ é€£æºåŠ¹ç‡æ€§: [è©•ä¾¡]
ğŸ¤ å”èª¿å‹•ä½œ: [è©•ä¾¡]  
âš¡ å•é¡Œå¯¾å¿œ: [è©•ä¾¡]
ğŸ” å“è³ªä¿è¨¼: [è©•ä¾¡]
ğŸ‘‘ çµ±åˆ¶åŠ›: [è©•ä¾¡]

ğŸ’¡ æœ€é©åŒ–ææ¡ˆ: [å…·ä½“çš„æ”¹å–„ææ¡ˆ]\"

å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
MONITOR_ANALYSIS

echo "âœ… é€£æºç›£è¦–å®Œäº†"
